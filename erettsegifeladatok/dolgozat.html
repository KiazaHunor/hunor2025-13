<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Doga</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body 
    {
      background-color: #6282ff;
    }
    .card 
    {
      border: none;
      border-radius: 5px;
      background: #fff;
    }
    .btn-primary 
    {
      background-color: #4a6cf7;
      border: none;
    }
    label 
    {
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div class="container ">
    <h1 class="mb-5 text-center">Reklám</h1>

    <div class="card mb-4 p-4">
      <h2 class="h5 mb-3">1. feladat  JSON beolvasás</h2>
      <form class="row gy-2 gx-2 align-items-center" onsubmit="return false;">
        <div class="col-md-6">
          <label for="fájl" class="form-label">JSON file kiválasztása:</label>
          <input type="file" id="fájl" class="form-control" accept="application/json">
        </div>
        <div class="col-auto align-self-end">
          <button id="beolvas" class="btn btn-primary">Beolvasás</button>
        </div>
      </form>
      <p class="mt-3 mb-0"> Beolvasott rendelések száma: <span id="eredmenyek" class="fw-bold"></span></p>
    </div>

    <div class="card mb-4 p-4">
      <h2 class="h5 mb-3">2. feladat:</h2>
      <button id="rendeles" class="btn btn-secondary">mehet</button>
      <pre id="eredmeny2" class="eredmeny mt-3"></pre>
    </div>

    <div class="card mb-4 p-4">
      <h2 class="h5 mb-3">3. feladat:</h2>
      <form class="row gy-2 gx-2 align-items-end" onsubmit="return false;">
        <div class="col-md-4">
          <label for="igen" class="form-label">igen:</label>
          <input type="number" id="igen" class="form-control" min="1" max="30">
        </div>
        <div class="col-auto">
          <button id="rendelesek" class="btn btn-secondary">mehet</button>
        </div>
      </form>
      <pre id="eredmeny3" class="eredmeny mt-3"></pre>
    </div>

    <div class="card mb-4 p-4">
      <h2 class="h5 mb-3">4. feladat:</h2>
      <button id="negyes" class="btn btn-secondary">mehet</button>
      <pre id="eredmeny4" class="eredmeny mt-3"></pre>
    </div>
  <script>
    let rendeles = [];


    document.getElementById('beolvas').addEventListener('click', () => 
    {
      const fajl = document.getElementById('fájl').files[0];
      if (!fajl) 
      {
        return;
      }
      const olvas = new FileReader();
      olvas.onload = function() 
      {
        rendeles = JSON.parse(olvas.result);
        document.getElementById('eredmenyek').innerText = rendeles.length;
      };
      olvas.readAsText(fajl);
      });

    
    document.getElementById('rendeles').addEventListener('click', () => 
    {
        document.getElementById('eredmeny2').textContent = `A rendelések száma: ${rendeles.length}`;
    });

    
    document.getElementById('btnigenRendeles').addEventListener('click', () => {
      const igen = parseInt(document.getElementById('igen').value);
      let db = 0;
      for (const r of rendeles) {
        if (r.igen === igen) db++;
      }
      document.getElementById('eredmeny3').textContent = `A ${igen}. igenon ${db} rendelés történt.`;
    });


    document.getElementById('negyes').addEventListener('click', () => {
      let igenokSzama = 0;
      for (let igen = 1; igen <= 30; igen++) {
        let cucc = false;
        for (const r of rendeles) {
          if (r.igen === igen && r.varos === 'NR') {
            cucc = true;
            break;
          }
        }
        if (!cucc) igenokSzama++;
      }
      if (igenokSzama === 0) {
        document.getElementById('eredmeny4').textContent = "";
      } else {
        document.getElementById('eredmeny4').textContent =
          `${igenokSzama}`;
      }
    });
  </script>
</body>
</html>
