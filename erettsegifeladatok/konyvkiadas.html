<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 május: Könyvkiadás</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <h1>
        2025 kiadas
    </h1>
    <label for="szerzonev">2.feladat: </label>
   <input type="text" id="szerzonev">
   <input type="submit" onclick="feladat2()" value="Keresés">
   <div id="eredmeny2"></div>

   <label for="szerzonev">3.feladat: </label>
   <input type="text" id="szerzonev">
   <input type="submit" onclick="feladat3()" value="Keresés">
   <div id="eredmeny3"></div>


   <label for="szerzonev">4.feladat: </label>
   <input type="text" id="szerzonev">
   <input type="submit" onclick="feladat4()" value="Keresés">
   <div id="eredmeny4"></div>

   <label for="szerzonev">5.feladat: </label>
   <input type="text" id="szerzonev">
   <input type="submit" onclick="feladat5()" value="Keresés">
   <div id="eredmeny5"></div>



    <script>
        function feladat2(){
            let nev=document.querySelector("#szerzonev").value;
            let nevdarab=nev.split(" ");
            let kulfoldinev=nevdarab.toReversed().join(", ");
            //console.log(kulfoldinev);

            let talalat=adatok.filter(e=>(e.mu.includes(nev) || e.mu.includes(kulfoldinev)))
            //console.log(adatok);
            console.log(talalat);
            if(talalat.length===0){
                document.getElementById("eredmeny2").innerHTML="Nem adtak ki";
            }
            else{
                document.getElementById("eredmeny2").innerHTML=talalat.length+" könyv";
            }
        }
        function feladat3()
        {
            console.log(adatok.map(e=>e.peldany).toSorted((a,b)=>a-b));
            console.log(Math.max(adatok.map(e=>e.peldany)));


            let talalatok=adatok.filter(e=>e.peldany=Math.max(adatok.map(e=>e.peldany)));

            document.getElementById("eredmeny3").innerHTML="legnagyobb példányszám "+talalatok[0].peldany+"elöfordult"+ talalatok.length +"alkalommal";
        }

        function feladat4()
        {
            let talalat=adatok.find(e=>e.nemzetiseg=="kf" &&e.peldany>=40000);
            document.getElementById("eredmeny4").innerHTML=`${talalat.ev}/${talalat.negyedev}. ${talalat.mu}`;
        }

        function feladat5()
        {
            let talalatok={};
            adatok.forEach(e=>{
                //if(talalatok[e.ev]=== undefined) talalatok[e.ev]={"ma":[],"kf":[]};
                if(talalatok[e.ev]=== undefined) talalatok[e.ev]={"ma":[],"kf":[]};
                talalatok[e.ev][e.nemzetiseg].push(e.peldany);
            });

            let tabla=document.createElement("table");

            for(let [ev,kiadasok] of Object.entries(talalatok))
            {
                let sor=document.createElement("tr");
                let cellaEV=document.createElement("td");
                cellaEV.innerHTML=ev;

                let cellaMagyar=document.createElement("td");
                cellaMagyar.innerHTML=kiadasok.ma.length;
                let cellaMagyarPeldany=document.createElement("td")
                cellaMagyarPeldany.innerHTML=kiadasok.ma.reduce((osszeg,e)=>osszeg+e);

                let cellaKulfoldi=document.createElement("td");
                cellaKulfoldi.innerHTML=kiadasok.kf.length;
                let cellaKulfoldiPeldany=document.createElement("td")
                cellaKulfoldiPeldany.innerHTML=kiadasok.kf.reduce((osszeg,e)=>osszeg+e);

                

                console.log(kiadasok);
                sor.appendChild(cellaEV);
                sor.appendChild(cellaMagyar);
                sor.appendChild(cellaMagyarPeldany);
                sor.appendChild(cellaKulfoldi);
                sor.appendChild(cellaKulfoldiPeldany);

                tabla.appendChild(sor);
            }

            document.getElementById("eredmeny5").appendChild(tabla);
            document.getElementById("eredmeny5").innerHTML=talalatok;


            function feladat6()
            {
                const talalat={};
                adatok.forEach(e=>
                {
                    if(talalat[e.mu]===undefined) talalat[e.mu]=[];
                    talalat[e.mu].push
                });
                let talalat2=Object.keys(talalat)
                .filter(e=>talalat[e].length>=3)
                .filter(k=>talalat[k][0]<talalat[k][1] && talalat[k][0]<talalat[k][2])
                console.log(talalat2);
            }



        }






        let adatok=[];

        fetch("kiadas.json")
            .then(function(valasz) { return valasz.json(); })
            .then(function(json) {
                //console.log(json);
                adatok=json;
        });
        
    </script>
</body>
</html>